# 反向代理与代理

> 代理：Proxy

总的来说 `(正向)代理`与`反向代理`的区分就一句话

**反向代理是为服务器做事，正向代理是为客户(端)做事**


![代理与反向代理](./image/代理解析图.jpg)


> 心急的同学可以离开了，反向代理就这么简单，没了，注意，你要理解反向代理和代理只是一个概念想要看实例的话，可以继续。

## 什么是反向代理？ 什么是负载均衡？ nginx? 为什么总是一起出现

1. Nginx (engine x) 是一个高性能的HTTP和反向代理服务器。注意，和tomcat/jboss一样，这个东西是服务器。
2. 反向代理： 其实反向代理在英文翻译里面叫做 reverse proxy 叫做 代理反转，类似于 Inversion of Control（控制反转），代理反转前提是要明白什么时代理。
反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。
3. 负载均衡：Load Balance，其意思就是分摊到多个操作单元上进行执行。负载均衡往往伴随着反向代理一起出现，目的就是为了保证性能的最大化。谷歌自己设计的一个负载均衡器名字叫做：Maglev（磁悬浮列车），
可见其最大的目标就是提高性能（当然附带的会有其他的功能，不过也有可能转交给其他模块来实现代替）。

要想了解清除这些概念，首先我们要有适当的环境来比喻这些东西具体的作用。在这里，我假设以阿里巴巴为例，详细的解释一下上面三者的联系与作用。

我们都知道，阿里巴巴典型的产品就是淘宝网。中国十几亿的用户基本上大部分都有人在用，尤其是双十一期间，那访问量是巨大无比的。

这个时候，问题就来了，访问量这么大，电脑会不会卡？当然卡，可能还会挂掉。

我们假设： 阿里巴巴开发部现在用自己的一台 笔记本电脑运行了淘宝网的服务器，开始迎接双十一的到来，*****，一通操作之后，1s钟1个亿的请求就到了这台电脑上，电脑的cpu总共才4核心，还是机械硬盘。
先不说你的2m/s的网线有没有足够的带宽容纳，单单就服务器（开发部的笔记本电脑运行的tomcat服务器）就不能够处理过来。
###怎么办？
小王申请： 老大，我们升级电脑，cpu+内存+硬盘全都升级，但无济于事，面对一个亿/s的访问量，一台电脑根本不足以处理这些请求。
于是就想要多台电脑一起来齐心协力共同分担压力，一起承载这1亿/s的请求。但是你的电脑ip是192.168.10.55,他的电脑ip是192.168.10.56。
总不能让用户自己选择ip地址吧？
### 怎么办？
于是设计了一个前台助理，助理电脑上IP为192.168.10.0。所有的请求都来到他的电脑上，但是助理不做处理，
只是不断地安排手下不同的电脑来接待来访的客人(`反向代理`)。

终于，在助理的协调下，整个开发部一万台电脑齐心协力，为1亿/s的访问做出了相应。双十一过后，助理就被投诉了，原来她和开发部的小张是情侣，
双十一期间，别人都累的要死要活，唯独小张没有事做，这当然不行啦，于是开发部就设计了一个规则：当前谁最闲，用户的请求就由谁去处理，以此
来均衡不同的员工，达到工作总量上保持一致(`负载均衡`)。

--------------------------------------
在上面的描述中， nginx就是我们的助理，他是部署在电脑上的一个 服务器，作用是接受所有的服务器进来的请求，并且转发给自己手底下的服务器来处理。
在这个过程中，nginx在帮助他的服务器做事情（管理调度的事情），虽然看似很轻松，但是管理者的身份责任重大且必须存在，你必须承认nginx确确实实帮助
服务器做了一些事情的（符合帮助服务器做事的准则->反向代理）。



