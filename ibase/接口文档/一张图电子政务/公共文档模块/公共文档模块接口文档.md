# 公共文档模块接口文档

<div style="float:right">

|作者|日期|
|----|---|
|郑烨锟|2019年6月5日|

</div>

## 接口1：获取个人文件树和共享文件树


> `/getUserFileTree?userId=dc792782-9a38-412e-ab0f-d0f92a5673e9`

*请求类型*：`GET`

*请求参数*：

```js
userId="dc792782-9a38-412e-ab0f-d0f92a5673e9"
```

> userId是当前用户的ID

*返回参数*

```json
{
	"userFileTree": [
		{
			"id": "00000001-0000-0000-0010-0000000000010",
			"text": "共享文件",
			"attributes": {
				"fileAddress": "./fileName.*"
			},
			"children": [
				{
					"id": "dc792782-9a38-412e-ab0f-d0f92a5673e9",
					"text": "权限人",
					"attributes": {
						"fileAddress": "./fileName.*"
					},
					children:[
						"id": "dc792782-9a38-412e-ab0f-d0f92a5673e9",
						"text": "文件名",
						"attributes": {
							"fileAddress": "./fileName.*"
						}
					],
				}, {
					"id": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
					"text": "权限人",
					"attributes": {
						"fileAddress": "./fileName.*"
					},
					children:[
						{
							"id": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
							"text": "文件夹名",
							"attributes": {
								"fileAddress": "./fileName.*"
							},
							children:[
								{
									"id": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
									"text": "文件名",
									"attributes": {
										"fileAddress": "./fileName.*"
									},
									children:[],
								}
							],
						}
					],
				}, {
					"id": "71e2d9d9-5853-4797-82e8-e5f1f4fd3afd",
					"text": "当前用户",
					"attributes": {
						"fileAddress": "./fileName.*"
					},
					children:[
						// 当前用户文件树
					],
				}
			]
		}
	],
	"sharedFileTree": [
		{
			"id": "00000001-0000-0000-0010-000000000001",
			"text": "个人文件",
			"attributes": {
				"parentId": "/",
				"fileAddress": "./fileName.*"
			},
			"children": [
				{
					"id": "dc792782-9a38-412e-ab0f-d0f92a5673e9",
					"text": "文件名",
					"attributes": {
						"parentId": "00000001-0000-0000-0010-000000000001",
						"fileAddress": "./fileName.*"
					},
					children:[],
				}, {
					"id": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
					"text": "文件名",
					"attributes": {
						"parentId": "00000001-0000-0000-0010-000000000001",
						"fileAddress": "./fileName.*"
					},
					children:[],
				}, {
					"id": "71e2d9d9-5853-4797-82e8-e5f1f4fd3afd",
					"text": "文件夹名",
					"attributes": {
						"parentId": "00000001-0000-0000-0010-000000000001",
						"fileAddress": "./fileName.*"
					},
					children:[
						{
							"id": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
							"text": "文件夹名",
							"attributes": {
								"parentId": "71e2d9d9-5853-4797-82e8-e5f1f4fd3afd",
								"fileAddress": "./fileName.*"
							},
							children:[
								{
									"id": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
									"text": "文件名",
									"attributes": {
										"parentId": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
										"fileAddress": "./fileName.*"
									},
									children:[],
								}
							],
						}
					],
				}
			]
		}
	]
}
```

> 注：返回json数据结构参考easyui-tree的树结构，返回数据为个人拥有的文件树和这些文件对应的权限人树

## 接口2：修改目录(文件夹)名称

> `/updateFolderName`

*请求类型*：`POST`

*请求数据*

```json
{
	sUid: "00000001-0000-0000-0010-000000000001",	// 当前用户ID
	rid: "1ec3b9f1-ba37-474e-801d-f6f5e04a4743"	// 文件ID
}
```

*返回数据*

```json
{
	state: true,
	errorMessage: "错误信息！"
}
```


##接口3：上传文件

	这里会同时更新个人文件树，也就是修改个人文件树


## 接口4：删除文件

	这里会同时更新个人文件树，也就是修改个人文件树


## 接口5：设置权限

	这里会修改个人文件树
	这里会修改共享文件树