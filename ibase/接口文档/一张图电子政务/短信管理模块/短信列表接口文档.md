# 短信列表接口文档

<div style="float:right">

|作者|日期|
|----|---|
|郑烨锟|2019年1月22日|

</div>

#### 接口1：获取短信列表

	获取短信列表，默认获取指定条数短信
	如果指定时间段，则默认获取指定时间段的指定条数的短信

> `/electronGovernmentWebService/shortMessage/getSmsList`

*请求类型*：`POST`

*请求数据*

```json
{
	sUid: "123456",  //用户标识
	startTime: "1558800000",   	// 开始时间时间戳：2019-05-26 "" 若均为空，则查询全部
	endTime: "1558886400",  	// 结束时间时间戳：2019-05-27     "" 若均为空，则查询全部
	pageSize: 20,	// 每页显示的条数
	currentPage: 1,	// 当前页数
	bSend: "1",			// ""代表全部 ("-1":未成功, "1":已成功, "0":草稿)
	searchType: "mRecv", // --相当于标识	// 查询类型 "mRecv" || "mCont"  || "" 代表全部类型
	searchText:"",           // "" 代表所有
}
```

*返回数据*

```json
[
	{
		mRecv: "张三", // 收件人
		mCont: "短信内容。。。",	// 短信内容
		mDate: "1569027011",  	// 发送时间时间戳：2019-09-21 08-50-11
		bSend  : "0",	//是否发送成功 ""代表全部 ("-1":未成功, "1":已成功, "0":草稿)
		mRecvTel: "13125742635",	// 电话号码
		errInfo : "错误信息"
	},
	{
		mRecv: "李四",
		mCont: "短信内容。。。",
		mDate: "1569027011",
		bSend: "1",
		mRecvTel: "13125742635",
		errInfo: "错误信息"
	}
]
```

> 注：列表数据根据时间倒序显示，也就是最新数据显示在第一条。


#### 接口2：获取组织成员树

	这个是获取短信收件人的信息

> `/getReceiverInfos`

*请求类型*：

*请求参数*

```

```

*返回参数*

```json
[{
  "id": "#3",
  "text": "所有角色",
  "attributes": {
    "phoneNumber": "13169962222"
  },
  "children": [{
    "id": "dc792782-9a38-412e-ab0f-d0f92a5673e9",
    "text": "土地供应管理-所有权限",
	"leaf": true,
    "attributes": {
      "phoneNumber": "13169962222"
    }
  }, {
    "id": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
    "text": "外部用户",
    "attributes": {
      "phoneNumber": "13169962222"
    }
  }, {
    "id": "71e2d9d9-5853-4797-82e8-e5f1f4fd3afd",
    "text": "广东省不动产登记预受理系统",
    "attributes": {
      "phoneNumber": "13169962222"
    }
  }]
}]
```

> 注：返回json数据结构参考easyui-tree的树结构

#### 接口3：短信发送

	根据可选列表根据,
	注意：若没有收件人姓名，则占位符为 "noName"，例如：对应关系： [noName,李明]， [13125742635,13125742634]

> `/electronGovernmentWebService/shortMessage/sendSms`

*请求类型*：`POST`

*请求数据*
```json
{
	sUid: "12345",
	receiver: "张三;李四;;王五",	// 收件人姓名  ";" 英文分号 --mRecv  
	mRecvTel: "13125742635;13125742634;;王五",	// 收件人电话号码 ";"  
	mCont: "发送内容。。。",
	sendSate: "1",	// "1"：普通发送状态，"0"：重发状态
	sendTime: "1569027011",	// 发送时间时间戳：2019-09-21 08-50-11--mDate   
}
```

> 注1：这里receiver收件人可以使用选择多个，使用英文分号";"区分。同样电话号码也是有多个，通过选择框同时填入，并且根据英文";"分号一一对应。

> 注2：手机号码不能为空

*返回数据*

```json
{
	state: true,	// 发送状态：true表示成功，false表示失败
	errInfo: "",	// 如果发送失败返回失败信息
}
```