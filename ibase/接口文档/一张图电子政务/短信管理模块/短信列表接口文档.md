# 短信列表接口文档

<div style="float:right">

|作者|日期|
|----|---|
|郑烨锟|2019年5月27日|

</div>

#### 接口1：获取短信列表

	获取短信列表，默认获取指定条数短信
	如果指定时间段，则默认获取指定时间段的指定条数的短信

> `/electronGovernmentWebService/shortMessage/getSmsList`

*请求类型*：`POST`

*请求数据*

```json
{
	sUid: "123456",  //用户标识
	startTime: "1559703841917",   	// 开始时间时间戳	"" 若均为空，则查询全部
	endTime: "1559703841917",  	// 结束时间时间戳     "" 若均为空，则查询全部
	pageSize: 20,	// 每页显示的条数
	currentPage: 1,	// 当前页数
	bSend: "1",			// ""代表全部 ("-1":未成功, "1":已成功, "0":草稿)
	searchType: "mRecv", // 查询类型 "mRecv"：收件人 || "mCont"：短信内容  || "" 代表全部类型
	searchText:"",           // "" 代表所有
}
```

*返回数据*

```json
{
    "rows": 20,
    "page": 1,
    "total": 20,
    "queryList": [
		{
			rid:"15641321",
			mrecv: "张三", // 收件人
			mcont: "短信内容。。。",	// 短信内容
			mdate: "1559703841917",  	// 发送时间时间戳
			bsend  : "0",	//是否发送成功 ""代表全部 ("-1":未成功, "1":已成功, "0":草稿)
			mrecvtel: "13125742635",	// 电话号码
			errinfo : "错误信息"
		},
		{
			rid:"45645454",
			mrecv: "李四",
			mront: "短信内容。。。",
			mdate: "1559703841917",
			bsend: "1",
			mrecvtel: "13125742635",
			errinfo: "错误信息"
		}
	]
};
		
```

> 注：列表数据根据时间倒序显示，也就是最新数据显示在第一条。


#### 接口2：获取组织成员树

	这个是获取短信收件人的信息

> `/electronGovernmentWebService/shortMessage/getReceiverTreeInfos`

*请求类型*：`GET`

*请求参数*：`无`

*返回参数*

```json
[{
  "id": "#3",
  "text": "所有角色",
  "children": [{
    "id": "dc792782-9a38-412e-ab0f-d0f92a5673e9",
    "text": "土地供应管理-所有权限",
	"children": []
  }, {
    "id": "1ec3b9f1-ba37-474e-801d-f6f5e04a4743",
    "text": "外部用户",
	"children": []
  }, {
    "id": "71e2d9d9-5853-4797-82e8-e5f1f4fd3afd",
    "text": "广东省不动产登记预受理系统",
	"children": []
  }]
}]
```

> 注：返回json数据结构参考easyui-tree的树结构，返回数据为所有组织成员

#### 接口3：获取选中组织成员手机号码

	根据ID获取对应成员手机号码

> `/electronGovernmentWebService/shortMessage/getPhoneNumberById`

*请求类型*：`POST`

*请求参数*：

```json
{
	userIds: "dc792782-9a38-412e-ab0f-d0f92a5673e9;dc792782-9a38-412e-ab0f-d0f92a5673e9;dc792782-9a38-412e-ab0f-d0f92a5673e9;dc792782-9a38-412e-ab0f-d0f92a5673e9"
}
```

> 传入被选中的成员ID，以英文分号分割";"

*返回参数*

```json
"13539287777;13539287777;13539287777;13539287777"
```

> 返回与ID对应的手机号码，以英文分号分割";"

#### 接口4：短信发送

	根据可选列表根据,
	注意：若没有收件人姓名，则占位符为 "noName"，例如：对应关系： [noName,李明]， [13125742635,13125742634]

> `/electronGovernmentWebService/shortMessage/sendSms`

*请求类型*：`POST`

*请求数据*
```json
{
	rid:"12345",	// --若是普通短信发送，rid传个""给我,若是重发则把rid传过来
	sUid: "12345",
	receiver: "张三;李四;;王五",	// 收件人姓名  ";" 英文分号 --mRecv  
	mRecvTel: "13125742635;13125742634;;王五",	// 收件人电话号码 ";"  
	mCont: "发送内容。。。",
	sendTime: "1559703841917",	// 发送时间时间戳--mDate   
}
```

> 这里receiver收件人可以使用选择多个，使用英文分号";"区分。同样电话号码也是有多个，通过选择框同时填入，并且根据英文";"分号一一对应。
> 手机号码不能为空

*返回数据*

```json
{
	state: true,	// 发送状态：true表示成功，false表示失败
	errInfo: "",	// 如果发送失败返回失败信息
}
```