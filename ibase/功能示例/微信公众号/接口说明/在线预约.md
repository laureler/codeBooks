# 在线预约接口说明文档

预约申请 | 预约确认

> 参考测试接口： http://118.24.70.239:7300/mock/5c9af379365f9600200deb72/WSYY

## 预约申请页面接口

#### 接口1：获取办事网点--GetYYBSWD

> http://192.168.10.91:8071/WSYY/GetYYBSWD（string strJson）

*传入参数*
```json
{ 
    "username": " WSYYUSER", 
    "password": " b7OmrnAjfyi42sOKCi3jtw1I1mw"
 }
```

> 此处为通用请求参数，用户名和密码

*返回参数*
```json
{
  "szwdinfo": [{
    "szwd": "天河区办事点"
  }]
}
```

> 此处为接口返回数据，表示可选择办理网点

#### 接口2：获取预约事项--GetYYSX

> http://192.168.10.91:8071/WSYY/GetYYSX（string strJson）

*传入参数*
```json
{ 
    " username": " WSYYUSER", 
    " password": " b7OmrnAjfyi42sOKCi3jtw1I1mw", 
    " szwd": "天河区办事点", 
    " yyfs": " 2"
}
```
> 此处为接口请求参数，szwd为选中的办事网店；yyfs为预约方式

*返回参数*
```json
{
  "yysxinfo": [{
      "yysx": "二手房转移登记"
    },
    {
      "yysx": "抵押权首次登记"
    },
    {
      "yysx": "一手商品房转移登记"
    },
    {
      "yysx": "预告登记"
    }
  ]
}
```

> 此处为接口返回数据，表示可选择的预约事项yysx

#### 接口3：获取预约时间--GetYYRQ

> http://192.168.10.91:8071/WSYY/GetYYRQ（string  strJson）

*传入参数*
```json
{ 
    " username": " WSYYUSER", 
    " password": " b7OmrnAjfyi42sOKCi3jtw1I1mw", 
    " szwd": "天河区办事点", 
    " yyfs": " 2"
}

```
*返回参数*
```json
{
  "yyrqinfo": [{
      "yyrq": "2017-11-21"
    },
    {
      "yyrq": "2017-11-22"
    },
    {
      "yyrq": "2017-11-23"
    },
    {
      "yyrq": "2017-11-24"
    }
  ]
}
```

> 此处为接口返回数据，继选择预约事项后，选择要预约的时间段yyrq

#### 接口4：获取预约时段--GetYYSD

> http://192.168.10.91:8071/WSYY/GetYYSD（string  strJson）

*传入参数*
```json
{ 
    " username": " WSYYUSER", 
    " password": " b7OmrnAjfyi42sOKCi3jtw1I1mw", 
    " szwd": "天河区办事点", 
    " yysx": "二手房转移登记",
    " yyrq": "2017-11-21",
    " yyfs": " 2"
}
```

> 此处为接口请求参数，szwd为选中的办事网点；yysx是选择的预约事项；
    yyrq为选中的预约日期；yyfs为预约方式。

*返回参数*
```json
{
  "yysdinfo": [{
      "yysd": "08:30-09:00",
      "zhs": "2",
      "yyys": "0"
    },
    {
      "yysd": "09:00-10:00",
      "zhs": "5",
      "yyys": "0"
    },
    {
      "yysd": "10:00-11:00",
      "zhs": "5",
      "yyys": "0"
    },
    {
      "yysd": "11:00-12:00",
      "zhs": "5",
      "yyys": "0"
    },
    {
      "yysd": "14:30-15:00",
      "zhs": "2",
      "yyys": "0"
    },
    {
      "yysd": "15:00-16:00",
      "zhs": "5",
      "yyys": "0"
    },
    {
      "yysd": "16:00-17:00",
      "zhs": "5",
      "yyys": "0"
    },
    {
      "yysd": "17:00-17:30",
      "zhs": "2",
      "yyys": "0"
    }
  ]
}
```

> 此处为接口返回数据，继选择预约日期后，表示可选择的预约时段yysd；
    可预约总数zhs；已被预约数量yyys（用于计算剩余可预约数）。

#### 接口5：校验证书--CheckYYRInfo
> http://192.168.10.91:8071/WSYY/GetYYSD（string  strJson）

*传入参数*
```json
{ 
    "yyr": "张三", 
    "zjhm": "430421*****", 
    "zmh": "xxxxxxx", 
    "sjhm": "13800138000", 
    "yyfs": "2", 
    "password": "b7OmrnAjfyi42sOKCi3jtw1I1mw", 
    "username": "WSYYUSER"
}
```

> 此处传入预约人身份信息，用于校验用户身份证书是否过期。
    yyr为预约人名称；zjhm为预约人证件信息；zmh未明字段；sjhm为预约人手机号码；yyfs为预约方式。

*返回参数*
```json
{
  "resultcode": "1",
  "resultmsg": ""
}
```

> 此处是接口返回验证结果，当resultcode==="1"时，表示验证成功（跳转到预览页面/信息确认页面）。

## 预约信息提交页面接口

> 这个页面是供以预约人确认预约的页面，相当一个预览确认缓冲页面

#### 接口1：预约信息提交--SubmitYYInfo

> http://192.168.10.91:8071/WSYY/SubmitYYInfo（string  strJson）

*传入参数*
```json
{ 
    "bdczl": "", 
    "szwd": "天河区办事点", 
    "zjlx": "身份证", 
    "openid": "xxxxxxx", 
    "yyrq": "2017-11-21", 
    "sjhm": "13800138000", 
    "yysd": "08:30-09:00", 
    "zjhm": "430421198709249373", 
    "password": "b7OmrnAjfyi42sOKCi3jtw1I1mw", 
    "yyr": "test2", 
    "zmh": null, 
    "yyfs": "2", 
    "yysx": "二手房转移登记", 
    "username": "WSYYUSER"
}

```

> 此处为接口请求参数，将预约的信息以及预约人的信息提交确认。

*返回参数*
```json
{
  "resultcode": "1",
  "resultmsg": "YY20171122000005,5,2017-11-22,08:30-09:00,科韵路26号,test2,二手房转移登记",
  "yyinfo": [{
    "YYH": "YY20171122000005",
    "SXH": "5",
    "YYRQ": "2017-11-22",
    "YYSD": "08:30-09:00",
    "WDDZ": "科韵路26号",
    "YYR": "test2",
    "YYSX": "二手房转移登记"
  }]
}
```
> 此处返回预约成功的信息，将跳转到预约成功页面，展示预约成功信息页面。

## 实现图

*参考预约申请页面*
![](../images/预约申请页面.png)

*参考预约确认页面*
![](../images/预约申请确认页面.png)

*预约成功页面*
![](../images/预约成功页面.png)
